//DiQuick v1.4.21 http://www.diquick.com
(function(){const events={ready:function(){this.directive();this.append();this.observe();this.bind()},directive:function(){HTMLElement.prototype.setActive=function(val){const has=typeof val!=='undefined';if(has)components.active(this,val)}},append:function(){const nodes=[{type:'element',name:'message',selector:'.message.fade'},{type:'element',name:'drawer',selector:'.drawer'},{type:'element',name:'dialog',selector:'.dialog'},{type:'element',name:'carousel',selector:'.carousel'},{type:'attribute',name:'dialog',selector:'[data-open-dialog^="img@"]'}];const has=function(type,selector){const els=document.querySelectorAll(selector);return type==='element'?Array.prototype.filter.call(els,function(el){return!el.hasOwnProperty('diquickEvent')}).length>0:type==='attribute'?els.length>0:false};for(let i=0;i<nodes.length;i++){const type=nodes[i].type;const name=nodes[i].name;const selector=nodes[i].selector;if(has(type,selector))components.init(type,name,selector)}},observe:function(){const MutationObserver=window.MutationObserver||window.WebKitMutationObserver;if(MutationObserver){const MutationObserverConfig={childList:true,subtree:true,attributes:true};const observer=new MutationObserver(function(mutations){events.append()});observer.observe(document,MutationObserverConfig)}else{document.addEventListener('DOMSubtreeModified',function(){events.append()})}},bind:function(){const doc=document.documentElement||document.body;const isMobile=navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);const nodes={click:{items:[{event:'handle',attribute:'data-move-panel'},{event:'handle',attribute:'data-move-carousel'},{event:'handle',attribute:'data-toggle-switch'},{event:'handle',attribute:'data-open-message'},{event:'handle',attribute:'data-close-message'},{event:'handle',attribute:'data-open-drawer'},{event:'handle',attribute:'data-toggle-drawer'},{event:'handle',attribute:'data-close-drawer'},{event:'handle',attribute:'data-open-dialog'},{event:'handle',attribute:'data-toggle-dialog'},{event:'handle',attribute:'data-close-dialog'},{event:'handle',attribute:'data-open-mask'},{event:'handle',attribute:'data-close-mask'},{event:'close',name:'drawer'},{event:'close',name:'dialog'}]},transition:{items:[{event:'timeout',name:'message'},{event:'timeout',name:'drawer'},{event:'timeout',name:'dialog'},{event:'timeout',name:'mask'},{event:'play',name:'carousel',element:'parentNode'},{event:'reset',name:'message'},{event:'reset',name:'dialog'}],propertys:{timeout:'opacity',play:'transform',reset:'opacity'},attributes:{timeout:'data-close-timeout',play:'data-play-interval'}},touch:{items:[{event:'move',name:'carousel'}]}};const getPath=function(el){let i=0;const path=[el];while(path[i]&&path[i]!==doc){path.push(path[i].parentNode);i++}return path};const hasPath=function(name){let result;const els=components.path;for(let i=0;i<els.length;i++){const el=els[i];const check=el.classList.contains(name);result=check;if(check)break}return result};doc.addEventListener('click',function(e){components.path=getPath(e.target);components.target=e.target;components.timeStamp=e.timeStamp;const items=nodes.click.items;for(let i=0;i<items.length;i++){const el=e.target;const event=items[i].event;const attribute=items[i].attribute;const name=items[i].name;if(event==='handle'){const check=el.hasAttribute(attribute);if(check){const arg=attribute.split('-');const val=el.getAttribute(attribute);components.selector(arg[1],arg[2],val)}}else if(event==='close'){const check=el.classList.contains(name)&&!el.hasAttribute('data-close-lock');if(check){components.selector(event,name)}}}});doc.addEventListener('transitionend',function(e){const items=nodes.transition.items;const propertys=nodes.transition.propertys;const attributes=nodes.transition.attributes;for(let i=0;i<items.length;i++){const event=items[i].event;const name=items[i].name;const element=items[i].element;const el=e.target[element]||e.target;const check=e.propertyName===propertys[event]&&el.classList.contains(name)&&(event==='timeout'?el.classList.contains('active'):event==='reset'?!el.classList.contains('active'):true);if(check){const val=el.getAttribute(attributes[event]);components.handle(el,event,name,val);break}}});if(isMobile){doc.addEventListener('touchstart',function(){const start=event.touches[0].pageX;events.touchStartPageX=start});doc.addEventListener('touchend',function(e){components.path=getPath(e.target);const start=events.touchStartPageX;const end=event.changedTouches[0].pageX;const move=end-start;const items=nodes.touch.items;for(let i=0;i<items.length;i++){const event=items[i].event;const name=items[i].name;const check=Math.abs(move)>30&&hasPath(name);if(check){const val=move>0?'prev':'next';components.selector(event,name,val)}delete events.touchStartPageX}})}}};let components={index:0,active:function(el,val){const event=typeof val==='number'?'move':val===true?'open':val===false?'close':false;if(event){const names=['panel','switch','carousel','message','drawer','dialog','mask'];for(let i=0;i<names.length;i++){const name=names[i];const check=el.classList.contains(name);if(check){this.handle(el,event,name,val);break}}}},selector:function(event,name,val){if((event==='open'||event==='toggle')&&val){const selector=name==='message'?'.message.fade[name='+val+']':name==='dialog'?'.dialog#'+(val.indexOf('img@')===0?'HTMLImageElement':val):'.'+name+'#'+val;const el=document.querySelector(event==='open'?selector+':not(.active)':selector);if(el)this.handle(el,event,name,val)}else{const els=this.path;for(let i=0;i<els.length;i++){const el=els[i];const check=el.classList.contains(name);if(check){this.handle(el,event,name,val);break}}}},init:function(type,name,selector){switch(type){case'element':{const els=document.querySelectorAll(selector);for(let i=0;i<els.length;i++){const el=els[i];const check=!el.hasOwnProperty('diquickEvent');if(check){Object.defineProperty(el,'diquickEvent',{value:true,writable:true});if(name==='carousel'){el.active=0;const val=el.getAttribute('data-play-interval');this.handle(el,'play',name,val)}else{const notMove=(name==='drawer'||name==='dialog')&&el.hasAttribute('data-keep-position');if(!notMove){const selector='data-'+name+'-container';const container=document.querySelector('['+selector+']')||this.create(selector);container.appendChild(el)}}}}break}case'attribute':{if(name==='dialog'){const img=document.querySelector('.dialog#HTMLImageElement');if(!img){const el=document.createElement('div');const img=new Image();el.id='HTMLImageElement';el.className='dialog';el.appendChild(img);document.body.appendChild(el);img.onload=function(){el.setAttribute('data-load-complete','')}}}break}}},handle:function(el,event,name,val){switch(event){case'move':{if(name==='panel'){const navs=this.query(el,'ul.title>li');const items=this.query(el,'ul.content>li');const check=!isNaN(val)&&val<navs.length&&val<items.length&&parseInt(val)>=0;if(check){const remove1=this.query(el,'ul.title>li.active');const remove2=this.query(el,'ul.content>li.active');const add=[navs[val],items[val]];this.set(remove1.concat(remove2),'removeClass','active');this.set(add,'addClass','active')}}else if(name==='carousel'){const navs=this.query(el,'ul.nav>li');const items=this.query(el,'ul.content>li');const check=val==='prev'||val==='next'||(!isNaN(val)&&val<items.length&&parseInt(val)>=0);if(check){const active=parseInt(el.active);const prev=active?active-1:items.length-1;const next=active<items.length-1?active+1:0;const index=val==='prev'?prev:val==='next'?next:val;const target=this.query(el,'ul.content')[0];const remove=this.query(el,'ul.nav>li.active');const add=[navs[index]];this.set(remove,'removeClass','active');this.set(add,'addClass','active');el.active=index;target.style.transform='translateX(-'+index+'00%)';clearTimeout(el.timeout)}}break}case'open':{if(name==='message'){el.style.order=++this.index}else if(name==='dialog'){const isImg=typeof val==='string'&&val.indexOf('img@')===0;if(isImg){const img=el.querySelector('img');const url=!val.split('@')[1]&&this.target.nodeName==='IMG'?this.target.src:val.split('@')[1];img.src=url}}this.set([el],'addClass','active');break}case'close':{this.set([el],'removeClass','active');break}case'toggle':{this.set([el],'toggleClass','active');break}case'timeout':{const check=val&&!isNaN(val)&&parseInt(val)>=500;if(check){const millisec=parseInt(val);const timeStamp='t'+this.timeStamp;el.timeStamp=timeStamp;setTimeout(function(){const check=el.timeStamp===timeStamp;if(check){delete el.timeStamp;components.handle(el,'close',name)}},millisec)}break}case'play':{if(name==='carousel'){const check=val&&!isNaN(val)&&parseInt(val)>=500;if(check){el.timeout=setTimeout(function(){components.handle(el,'move',name,'next')},val)}}break}case'reset':{if(name==='message'){el.style.order=''}else if(name==='dialog'&&el.id==='HTMLImageElement'){el.removeAttribute('data-load-complete')}break}}},create:function(attr){const el=document.createElement('div');el.setAttribute(attr,'');document.body.appendChild(el);return el},query:function(el,selector){const val=Math.random();el.setAttribute('data-scope',val);const els=el.querySelectorAll('[data-scope="'+val+'"]>'+selector);el.removeAttribute('data-scope');return[].slice.call(els)||[]},set:function(els,event,val){for(let i=0;i<els.length;i++){const el=els[i];if(el){switch(event){case'addClass':el.classList.add(val);break;case'removeClass':el.classList.remove(val);break;case'toggleClass':el.classList.toggle(val);break}}}}};if(document.attachEvent?document.readyState==='complete':document.readyState!=='loading'){events.ready()}else{document.addEventListener('DOMContentLoaded',events.ready())}})()